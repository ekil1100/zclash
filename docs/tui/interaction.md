# TUI Interaction Spec（P3-1 初稿）

> 目标：让 zclash TUI 在首屏 3 秒内可读、操作直觉、路径一致。

## 1) 信息架构（五区布局）

TUI 顶层采用 5 个主区：

1. **Overview**
   - 展示全局运行状态：运行/停止、当前 profile、模式、关键端口、健康摘要。
   - 面向“我现在到底是否可用”的第一判断。

2. **Proxies**
   - 展示代理组、组内节点、当前选择、基础健康信息（延迟/可用性）。
   - 支持快速切换、分组浏览、搜索过滤。

3. **Connections**
   - 展示活跃连接列表、目标地址、入站/出站映射、时长、流量。
   - 支持按目标/入站/出站筛选。

4. **Logs**
   - 展示分级日志（info/warn/error）与关键事件。
   - 支持搜索、级别过滤、滚动定位。

5. **Diagnose**
   - 聚合诊断动作：配置校验、端口监听检查、常见错误提示、修复建议。
   - 输出尽量“可操作”（告诉用户下一步做什么）。

---

## 2) 首屏布局建议（默认落地）

- 顶部：状态条（state/profile/mode/ports）
- 左侧主区：当前 tab 主要内容（Overview/Proxies/...）
- 右侧辅助区：上下文信息（帮助、摘要、快捷操作）
- 底部：全局快捷键提示 + 操作反馈

首屏必须保证：
- 用户不滚动即可看到“是否运行 + 是否健康 + 当前配置”
- 错误态明显可见（颜色/图标/文案）

---

## 3) 全局快捷键一致性原则

## 3.1 通用快捷键（跨区一致）
- `?`：打开/关闭快捷键帮助
- `/`：进入搜索/过滤输入
- `g`：打开快速跳转（Overview/Proxies/Connections/Logs/Diagnose）
- `r`：刷新当前视图数据
- `q`：退出当前弹窗（双击或确认后退出程序）

## 3.2 导航与选择
- `Tab` / `Shift+Tab`：区块或焦点切换
- `j/k` 或 `↑/↓`：列表移动
- `Enter`：确认/进入详情
- `Esc`：返回上一级

## 3.3 一致性约束
- 同一按键在所有 tab 语义不冲突
- 若局部重载按键，必须在底部提示条显式提示
- 关键动作（如切换代理）执行后必须有反馈

---

## 4) 首屏信息密度优化原则

1. **先结论后细节**
   - 首屏先显示状态摘要（可用/不可用、关键风险）
   - 细节通过展开或切换 tab 查看

2. **高频信息常驻**
   - 运行状态、当前 profile、mode、主要端口、最近错误

3. **低频信息按需展示**
   - 历史日志、长连接明细、次级统计

4. **视觉层级明确**
   - 状态优先级：error > warning > info
   - 同屏卡片不超过 5 块主信息

5. **反馈即时、文案可执行**
   - 错误文案尽量带修复动作（例如“去 Diagnose 执行配置校验”）

---

## 5) P3-1 验收标准（DoD）

- 五区布局定义清晰（Overview/Proxies/Connections/Logs/Diagnose）
- 全局快捷键集合可统一且可实现
- 首屏信息密度规则可执行（非抽象口号）
- 可直接作为 P3-2 交互细化输入文档
